{% extends 'base.html' %}
{% block content %}
<main class="mt-4 mb-4">
  <section aria-labelledby="edit-item-heading" class="container">
    <h2 id="edit-item-heading">EDIT ITEM</h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-4 mb-2">{{ form.make.label_tag }}{{ form.make }}</div>
        <div class="col-md-4 mb-2">{{ form.year.label_tag }}{{ form.year }}</div>
        <div class="col-md-4 mb-2">{{ form.model_name.label_tag }}{{ form.model_name }}</div>
      </div>
      <div class="row">
        <div class="col-md-4 mb-2">{{ form.model_designation.label_tag }}{{ form.model_designation }}</div>
        <div class="col-md-4 mb-2">{{ form.category.label_tag }}{{ form.category }}</div>
        <div class="col-md-4 mb-2">{{ form.title.label_tag }}{{ form.title }}</div>
      </div>
      <div class="mb-3">
        {{ form.description.label_tag }}{{ form.description }}
      </div>
      <div class="mb-3">
        {{ form.price.label_tag }}{{ form.price }}
      </div>
      <div class="mb-3">
        <label for="id_images" class="form-label">Add Images (up to 6):</label>
        <input type="file" name="images" id="id_images" multiple accept="image/*" class="form-control">
      </div>
      <button type="submit" class="btn btn-warning">SAVE CHANGES</button>
    </form>
  </section>
  <hr>
  <section aria-labelledby="current-images-heading" class="container">
    <h4 id="current-images-heading">CURRENT IMAGES</h4>
    {% if item.images.all %}
      <div>
        {% for image in item.images.all %}
          <figure style="display:inline-block;position:relative;margin:10px;">
            <img src="{{ image.image.url }}" alt="Motorcycle part: {{ item.title }}" style="max-width:120px;max-height:120px;border-radius:4px;">
            <a href="{% url 'delete_item_image' image.id %}" class="btn btn-sm btn-danger" style="position:absolute;top:2px;right:2px;">DELETE</a>
          </figure>
        {% endfor %}
      </div>
    {% else %}
      <p>No images uploaded for this item.</p>
    {% endif %}
    <a href="{% url 'account' %}" class="btn btn-warning mt-3">BACK TO ACCOUNT</a>
  </section>
  <div style="height: 6rem;"></div>  
</main>
{% endblock %}
